<!DOCTYPE html>
<html class="no-js" lang="pl">
<head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta content="Dekoratory w Pythonie. Co dają i jak je implementować." name="description">
<meta content="Maciej 'maQ' Kusz" name="author">
<link href="https://testerembyc.pl/posts/dekoratory-w-pythonie/" rel="canonical">
<link href="../jak-dorobic-do-etatu-czyli-tester-tworzy-rpa/" rel="prev">
<link href="../dlaczego-nie-bedziesz-testerem-i-co-mozesz-z-tym-fantem-zrobic-jesli-bardzo-chcesz/" rel="next">
<link href="../../feed_rss_created.xml" rel="alternate" title="Kanał RSS" type="application/rss+xml">
<link href="../../feed_rss_updated.xml" rel="alternate" title="Kanał RSS zaktualizowanych treści" type="application/rss+xml">
<link href="../../assets/images/icon.svg" rel="icon">
<meta content="mkdocs-1.5.3, mkdocs-material-9.5.18" name="generator">
<title>
Dekoratory w Pythonie - TesteremByc.pl
</title>
<link href="../../assets/stylesheets/main.66ac8b77.min.css" rel="stylesheet">
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet">
<link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CLato:400,400i,700,700i&amp;display=fallback" rel="stylesheet">
<style>:root{--md-text-font:"Roboto";--md-code-font:"Lato"}</style>
<link href="../../assets/stylesheets/testerembyc.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
<link href="../../assets/stylesheets/blog.min.css" rel="stylesheet">
<link href="../../assets/stylesheets/blog.min.css.map" rel="stylesheet">
<link href="../../assets/stylesheets/obsidian.min.css" rel="stylesheet">
<link href="../../assets/stylesheets/obsidian.min.css.map" rel="stylesheet">
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">
function __md_analytics(){function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","G-L9Q1L6NPGD"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&a("event","search",{search_term:this.value})}),document$.subscribe(function(){var t=document.forms.feedback;if(void 0!==t)for(var e of t.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault(),a("event","feedback",{page:document.location.pathname,data:e=this.getAttribute("data-md-value")}),t.firstElementChild.disabled=!0,(e=t.querySelector(".md-feedback__note [data-md-value='"+e+"']"))&&(e.hidden=!1)}),t.hidden=!1}),location$.subscribe(function(e){a("config","G-L9Q1L6NPGD",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-L9Q1L6NPGD",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}
</script>
<script>var consent;"undefined"!=typeof __md_analytics&&(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
<meta content="article" property="og:type">
<meta content="Dekoratory w Pythonie" property="og:title">
<meta content="Dekoratory w Pythonie. Co dają i jak je implementować." property="og:description">
<meta content="TesteremByc.pl" property="og:site_name">
<meta content="pl_PL" property="og:locale">
<meta content="https://testerembyc.pl/posts/dekoratory-w-pythonie/" property="og:url">
<meta content="https://testerembyc.pl/images/posts/2020/dekoratory-w-pythonie_social.jpg" property="og:image">
<meta content="summary_large_image" property="twitter:card">
<meta content="Dekoratory w Pythonie" property="twitter:title">
<meta content="Dekoratory w Pythonie. Co dają i jak je implementować." property="twitter:description">
<meta content="https://testerembyc.pl/images/posts/2020/dekoratory-w-pythonie_social.jpg" property="twitter:image">
</head>
<body data-md-color-accent="red" data-md-color-primary="black" data-md-color-scheme="default" dir="ltr">
<input type="checkbox" class="md-toggle" id="__drawer" autocomplete="off" data-md-toggle="drawer">
<input type="checkbox" class="md-toggle" id="__search" autocomplete="off" data-md-toggle="search">
<label class="md-overlay" for="__drawer">
</label>
<div data-md-component="skip">
<a href="#czym-jest-dekorator" class="md-skip">
Przejdź do treści
</a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--lifted md-header--shadow" data-md-component="header">
<nav class="md-grid md-header__inner" aria-label="Nagłówek">
<a href="https://testerembyc.pl" class="md-header__button md-logo" title="TesteremByc.pl" aria-label="TesteremByc.pl" data-md-component="logo">
<img src="../../assets/images/logo.svg" alt="logo">
</a>
<label class="md-icon md-header__button" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z">
</path>
</svg>
</label>
<form class="md-header__option" data-md-component="palette">
<input type="radio" class="md-option" id="__palette_0" aria-label="Switch to dark mode" data-md-color-accent="red" data-md-color-media="" data-md-color-primary="black" data-md-color-scheme="default" name="__palette">
<label class="md-icon md-header__button" for="__palette_1" hidden title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z">
</path>
</svg>
</label>
<input type="radio" class="md-option" id="__palette_1" aria-label="Switch to light mode" data-md-color-accent="red" data-md-color-media="" data-md-color-primary="black" data-md-color-scheme="slate" name="__palette">
<label class="md-icon md-header__button" for="__palette_0" hidden title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z">
</path>
</svg>
</label>
</form>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-icon md-header__button" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z">
</path>
</svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search">
</label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" aria-label="Szukaj" name="query" autocapitalize="off" autocomplete="off" autocorrect="off" data-md-component="search-query" placeholder="Szukaj" required spellcheck="false">
<label class="md-icon md-search__icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z">
</path>
</svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z">
</path>
</svg>
</label>
<nav class="md-search__options" aria-label="Szukaj">
<a href="javascript:void(0)" class="md-icon md-search__icon" title="Udostępnij" aria-label="Udostępnij" data-md-component="search-share" data-clipboard="" data-clipboard-text="" tabindex="-1">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z">
</path>
</svg>
</a>
<button class="md-icon md-search__icon" type="reset" aria-label="Wyczyść" tabindex="-1" title="Wyczyść">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z">
</path>
</svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest">
</div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
Inicjowanie wyszukiwania
</div>
<ol class="md-search-result__list" role="presentation">
</ol>
</div>
</div>
</div>
</div>
</div>
</nav>
<nav class="md-tabs" aria-label="Zakładki" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a href="../.." class="md-tabs__link">
<i class="fa-house fa-solid">
</i>
</a>
</li>
<li class="md-tabs__item">
<a href="../../python-kompendium/" class="md-tabs__link">
<i class="fa-brands fa-python">
</i>
</a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-grid md-main__inner">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--lifted md-nav--primary" aria-label="Nawigacja" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a href="https://testerembyc.pl" class="md-logo md-nav__button" title="TesteremByc.pl" aria-label="TesteremByc.pl" data-md-component="logo">
<img src="../../assets/images/logo.svg" alt="logo">
</a>
TesteremByc.pl
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input type="checkbox" class="md-toggle md-nav__toggle" id="__nav_1">
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-ellipsis">
<i class="fa-house fa-solid">
</i>
</span>
<span class="md-icon md-nav__icon">
</span>
</label>
<nav class="md-nav" data-md-level="1" aria-expanded="false" aria-labelledby="__nav_1_label">
<label class="md-nav__title" for="__nav_1">
<span class="md-icon md-nav__icon">
</span>
<i class="fa-house fa-solid">
</i>
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a href="../.." class="md-nav__link">
<span class="md-ellipsis">
index
</span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input type="checkbox" class="md-toggle md-nav__toggle" id="__nav_1_2">
<label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
<span class="md-ellipsis">
Archiwum
</span>
<span class="md-icon md-nav__icon">
</span>
</label>
<nav class="md-nav" data-md-level="2" aria-expanded="false" aria-labelledby="__nav_1_2_label">
<label class="md-nav__title" for="__nav_1_2">
<span class="md-icon md-nav__icon">
</span>
Archiwum
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a href="../archive/2023/" class="md-nav__link">
<span class="md-ellipsis">
2023
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../archive/2022/" class="md-nav__link">
<span class="md-ellipsis">
2022
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../archive/2021/" class="md-nav__link">
<span class="md-ellipsis">
2021
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../archive/2020/" class="md-nav__link">
<span class="md-ellipsis">
2020
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../archive/2019/" class="md-nav__link">
<span class="md-ellipsis">
2019
</span>
</a>
</li>
</ul>
</nav>

</li>
<li class="md-nav__item md-nav__item--nested">
<input type="checkbox" class="md-toggle md-nav__toggle" id="__nav_1_3">
<label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
<span class="md-ellipsis">
Kategorie
</span>
<span class="md-icon md-nav__icon">
</span>
</label>
<nav class="md-nav" data-md-level="2" aria-expanded="false" aria-labelledby="__nav_1_3_label">
<label class="md-nav__title" for="__nav_1_3">
<span class="md-icon md-nav__icon">
</span>
Kategorie
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a href="../categories/felieton/" class="md-nav__link">
<span class="md-ellipsis">
felieton
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../categories/git/" class="md-nav__link">
<span class="md-ellipsis">
git
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../categories/ludzie/" class="md-nav__link">
<span class="md-ellipsis">
ludzie
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../categories/python/" class="md-nav__link">
<span class="md-ellipsis">
python
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../categories/youtube/" class="md-nav__link">
<span class="md-ellipsis">
youtube
</span>
</a>
</li>
</ul>
</nav>

</li>
<li class="md-nav__item md-nav__item--nested">
<input type="checkbox" class="md-toggle md-nav__toggle" id="__nav_1_4">
<label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
<span class="md-ellipsis">
Tagi
</span>
<span class="md-icon md-nav__icon">
</span>
</label>
<nav class="md-nav" data-md-level="2" aria-expanded="false" aria-labelledby="__nav_1_4_label">
<label class="md-nav__title" for="__nav_1_4">
<span class="md-icon md-nav__icon">
</span>
Tagi
</label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a href="../tags/api/" class="md-nav__link">
<span class="md-ellipsis">
api
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/automatyzacja/" class="md-nav__link">
<span class="md-ellipsis">
automatyzacja
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/blog/" class="md-nav__link">
<span class="md-ellipsis">
blog
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/ci-cd/" class="md-nav__link">
<span class="md-ellipsis">
ci-cd
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/code16challenge/" class="md-nav__link">
<span class="md-ellipsis">
code16challenge
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/cv/" class="md-nav__link">
<span class="md-ellipsis">
cv
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/definicja/" class="md-nav__link">
<span class="md-ellipsis">
definicja
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/dekorator/" class="md-nav__link">
<span class="md-ellipsis">
dekorator
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/ebook/" class="md-nav__link">
<span class="md-ellipsis">
ebook
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/eksploracja/" class="md-nav__link">
<span class="md-ellipsis">
eksploracja
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/funkcje/" class="md-nav__link">
<span class="md-ellipsis">
funkcje
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/github/" class="md-nav__link">
<span class="md-ellipsis">
github
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/halloween/" class="md-nav__link">
<span class="md-ellipsis">
halloween
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/historie/" class="md-nav__link">
<span class="md-ellipsis">
historie
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/howto/" class="md-nav__link">
<span class="md-ellipsis">
howto
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/istqb/" class="md-nav__link">
<span class="md-ellipsis">
istqb
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/itea/" class="md-nav__link">
<span class="md-ellipsis">
itea
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/komfort/" class="md-nav__link">
<span class="md-ellipsis">
komfort
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/kursy/" class="md-nav__link">
<span class="md-ellipsis">
kursy
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/lambda/" class="md-nav__link">
<span class="md-ellipsis">
lambda
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/linkedin/" class="md-nav__link">
<span class="md-ellipsis">
linkedin
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/nauka/" class="md-nav__link">
<span class="md-ellipsis">
nauka
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/og%25C3%25B3lne/" class="md-nav__link">
<span class="md-ellipsis">
ogólne
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/plany/" class="md-nav__link">
<span class="md-ellipsis">
plany
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/podcast/" class="md-nav__link">
<span class="md-ellipsis">
podcast
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/profil/" class="md-nav__link">
<span class="md-ellipsis">
profil
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/rekrutacja/" class="md-nav__link">
<span class="md-ellipsis">
rekrutacja
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/requests/" class="md-nav__link">
<span class="md-ellipsis">
requests
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/rozw%25C3%25B3j/" class="md-nav__link">
<span class="md-ellipsis">
rozwój
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/rpa/" class="md-nav__link">
<span class="md-ellipsis">
rpa
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/rzeczywisto%25C5%259B%25C4%2587/" class="md-nav__link">
<span class="md-ellipsis">
rzeczywistość
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/testitka/" class="md-nav__link">
<span class="md-ellipsis">
testitka
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/testowanie/" class="md-nav__link">
<span class="md-ellipsis">
testowanie
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/testy/" class="md-nav__link">
<span class="md-ellipsis">
testy
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/trendbook/" class="md-nav__link">
<span class="md-ellipsis">
trendbook
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/unittest/" class="md-nav__link">
<span class="md-ellipsis">
unittest
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/vlog/" class="md-nav__link">
<span class="md-ellipsis">
vlog
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/zarobki/" class="md-nav__link">
<span class="md-ellipsis">
zarobki
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/zmiana/" class="md-nav__link">
<span class="md-ellipsis">
zmiana
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/%25C5%2582uczniczqa/" class="md-nav__link">
<span class="md-ellipsis">
łuczniczqa
</span>
</a>
</li>
<li class="md-nav__item">
<a href="../tags/%25C5%25BCycie/" class="md-nav__link">
<span class="md-ellipsis">
życie
</span>
</a>
</li>
</ul>
</nav>

</li>
</ul>
</nav>

</li>
<li class="md-nav__item">
<a href="../../python-kompendium/" class="md-nav__link">
<span class="md-ellipsis">
<i class="fa-brands fa-python">
</i>
</span>
</a>
</li>
</ul>
</nav>
</div>
<div class="md-sidebar__inner">
<div class="md-nav md-typeset tb-sidebar">
<div class="md-nav__title">
<a href="https://testerembyc.pl/pages/o-mnie/" class="md-nav__link md-nav__link--active">
O mnie
</a>
</div>
<div class="md-nav__item">
<img src="https://testerembyc.pl/images/pages/me_bw_small.jpg">
<p>
Nazywam się
<b>
Maciej Kusz
</b>
i od 2008 roku zajmuję się testowaniem oprogramowania. Na początku były to testy manualne, od 2011 początki testów automatycznych, a od 2013 automatyzacją testów z wykorzystaniem języka
<b>
Python
</b>
. Przez te kilka lat, zdarzyło mi się już być w kilku firmach i w kilku różnych projektach. Na stronie
<a href="https://testerembyc.pl/pages/o-mnie/">
o mnie
</a>
, znajdziesz ciut więcej informacji na ten temat.
</p>
</div>
</div>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary" aria-label="Spis treści">
<label class="md-nav__title" for="__toc">
<span class="md-icon md-nav__icon">
</span>
Spis treści
</label>
<ul class="md-nav__list" data-md-scrollfix="" data-md-component="toc">
<li class="md-nav__item">
<a href="#czym-jest-dekorator" class="md-nav__link">
<span class="md-ellipsis">
Czym jest dekorator?
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#funkcja-jest-obiektem" class="md-nav__link">
<span class="md-ellipsis">
Funkcja jest obiektem
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#czy-obiekt-moze-byc-funkcja" class="md-nav__link">
<span class="md-ellipsis">
Czy obiekt może być funkcją?
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#pierwszy-dekorator" class="md-nav__link">
<span class="md-ellipsis">
Pierwszy dekorator
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#args-i-kwargs" class="md-nav__link">
<span class="md-ellipsis">
args i kwargs
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#wraps" class="md-nav__link">
<span class="md-ellipsis">
wraps
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#dekorator-z-parametrami" class="md-nav__link">
<span class="md-ellipsis">
Dekorator z parametrami
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#partial" class="md-nav__link">
<span class="md-ellipsis">
partial
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#klasa-jako-dekorator" class="md-nav__link">
<span class="md-ellipsis">
Klasa jako dekorator
</span>
</a>
</li>
<li class="md-nav__item">
<a href="#podsumowanie" class="md-nav__link">
<span class="md-ellipsis">
Podsumowanie
</span>
</a>
</li>
</ul>
</nav>
</div>
<div class="md-sidebar__inner">
<div class="md-nav md-typeset tb-sidebar">
<div class="md-nav__title">
Newsletter
</div>
<div class="md-nav__item">
<p>
Chcesz być powiadamiany o nowościach na tej stronie oraz innych moich projektach? Jeśli tak, to zapisz się poniżej do newsletter'a.
<script src="https://eocampaign1.com/form/7e5ea679-a893-11ec-9258-0241b9615763.js" async data-form="7e5ea679-a893-11ec-9258-0241b9615763"></script>
Wszystkie podane przez Ciebie dane, będą przetwarzane zgodnie z
<a href="https://testerembyc.pl/pages/polityka-prywatnosci">
polityką prywatności
</a>
.
</p><hr>
<a href="https://testerembyc.pl/pages/regulamin">
Regulamin
</a>
<br>
<a href="#__consent">
Zarządzanie ciasteczkami
</a>
<p></p>
</div>
</div>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-typeset md-content__inner">
<div class="post-extra">
<div class="col">
<p class="post-date">
2020.01.09
</p>
</div>
<div class="col">
<a href="https://testerembyc.pl/posts/tags/funkcje/">
#funkcje
</a>
<a href="https://testerembyc.pl/posts/tags/dekorator/">
#dekorator
</a>
</div>
</div>
<h1>
Dekoratory w Pythonie
</h1>
<figure>
<p>
<img src="../../images/posts/2020/dekoratory-w-pythonie.jpg" alt="Dekoratory w Pythonie" loading="lazy">
</p>
<figcaption>
<p>
Wykorzystano zdjęcie autorstwa
<a href="https://www.pexels.com/pl-pl/@yankrukov">
Yan Krukov
</a>
z
<a href="https://www.pexels.com/">
Pexels
</a>
</p>
</figcaption>
</figure>
<p>
Ostatnich kilka artykułów na tym blogu, było związane z ogólnikami dotyczącymi
<a href="../dlaczego-nie-bedziesz-testerem-i-co-mozesz-z-tym-fantem-zrobic-jesli-bardzo-chcesz/" id="9c8f1db2ef9cc3618db09faf537fc3ee">
testów
</a>
. Tym razem wpis typowo techniczny związany z moim ulubionym językiem programowania, czyli Pythonem. Język ten ma pewne
<em>
magiczne
</em>
metody i elementy niespotykane w innych językach (lub sposób ich użycia i implementacji jest dużo bardziej złożony). Jednym z takich elementów jest tzw.
<strong>
dekorator
</strong>
.
</p>
<h2 id="czym-jest-dekorator">
Czym jest dekorator?
<a href="#czym-jest-dekorator" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
W skrócie
<a href="https://pl.wikipedia.org/wiki/Dekorator_(wzorzec_projektowy)">
dekorator
</a>
to jeden ze strukturalnych wzorców projektowych. Pozwala on na dynamiczne dodanie nowej funkcji do istniejącej klasy podczas działania programu.
</p>
<p>
W Pythonie implementacja dekoratorów dla metod po raz pierwszy została dodana w wersji
<strong>
2.4
</strong>
języka, a dokument, który to opisywał to
<a href="https://www.python.org/dev/peps/pep-0318/">
PEP 318 - Decorators for Functions and Methods
</a>
(
<strong>
PEP
</strong>
to skrót od
<a href="https://www.python.org/dev/peps/">
Python Enhancement Proposals
</a>
). W Pythonie 3.0 wprowadzono natomiast możliwość tworzenia dekoratorów dla klas (opis w
<a href="https://www.python.org/dev/peps/pep-3129/">
PEP 3129 - Class Decorators
</a>
.
</p>
<p>
Zasada działania dekoratorów polega na
<strong>
opakowaniu
</strong>
(tzw.
<a href="https://pl.wikipedia.org/wiki/Enkapsulacja">
enkapsulacji
</a>
) oryginalnej klasy, nową klasą, tzw. klasą
<strong>
dekorującą
</strong>
.
</p>
<p>
Na czym polega opakowywanie? Najprościej porównać to do starej rosyjskiej zabawki,
<a href="https://pl.wikipedia.org/wiki/Matrioszka">
matrioszki
</a>
.
</p>
<p>
<img src="../../images/posts/2020/dekoratory-w-pythonie_matrioszka.jpg" alt="Matrioszka" loading="lazy">
</p>
<p>
Jeśli nie wiesz, czym jest ta zabawka, to polecam zapoznać się z poniższym filmikiem, bo zasada działania idealnie odzwierciedla mechanizm opakowywania (a jeśli znasz tą zabawkę, tzn. że zapewne jesteś co najmniej tak stary, jak ja).
</p>
<div class="video">
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen src="https://www.youtube.com/embed/lz6Olxb29qA" title="Dekoratory w Pythonie">
</iframe>
</div>
<p>
Jak widać Matrioszka, to zabawka, w której mniejsze Matrioszki, umieszczane są w środku większej. Mniejsza Matrioszka jest wtedy
<em>
enkapsulowana
</em>
w większej. Ta mniejsza Matrioszka to nasza klasa
<strong>
dekorowana
</strong>
, a większa to klasa
<strong>
dekorująca
</strong>
. Tak jak i w przypadku Matrioszek, tak i dekoratorów może być więcej niż jeden. Jedyna różnica pomiędzy Matrioszką, a dekoratorem jest taka, że Matrioszka to w zasadzie taka sama lalka jak jej mniejsza wersja (różnią się głównie rozmiarem). Dekorator natomiast to zupełnie inna klasa, która dodaje nowe możliwości do już istniejącej klasy (Matrioszka tego nie potrafi).
</p>
<p>
Zauważ jedną, bardzo istotną rzecz: wszędzie powyżej wspominam, że dekorator jest klasą
<strong>
opakowującą
</strong>
inną klasę, a wspomniany PEP 318 mówi o dekorowaniu funkcji i metod. Czy przypadkiem nie ma tu gdzieś błędu?
</p>
<h2 id="funkcja-jest-obiektem">
Funkcja jest obiektem
<a href="#funkcja-jest-obiektem" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
Zanim przejdziemy do sedna, to zapoznajmy się z definicją
<a href="https://pl.wikipedia.org/wiki/Obiekt_(programowanie_obiektowe)">
obiektu
</a>
. Mocno streszczając, obiekt to struktura zawierająca dane i metody/funkcje służące do wykonania jakichś operacji na tych danych. Bardzo szybko zauważymy, że ten opis idealnie pasuje do
<a href="https://pl.wikipedia.org/wiki/Klasa_(programowanie_obiektowe)">
klasy
</a>
. Obiekt stworzony na podstawie definicji klasy jest
<em>
instancją
</em>
danej klasy.
</p>
<p>
Dlaczego więc, w Pythonie mówimy o dekorowaniu funkcji lub metod danej klasy (które też są funkcjami)? Otóż przyczyna jest bardzo prosta: funkcje w Pythonie są obiektami/klasami (nie zdziw się, bo od teraz będę używał tych nazw zamiennie). Jak każdy obiekt w Pythonie, tak i funkcja ma swój typ:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
</span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Example"</span><span class="p">)</span>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="nb">type</span><span class="p">(</span><span class="n">example_function</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="go">function</span>
</span></code></pre>
</div>
<p>
Ponieważ funkcja jest obiektem, możemy ją przechowywać w zmiennej:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Example"</span><span class="p">)</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="n">var</span> <span class="o">=</span> <span class="n">example_function</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="n">var</span><span class="p">()</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="go">Example</span>
</span></code></pre>
</div>
<p>
Czyli daje nam to taki sam efekt, jak wtedy, gdy wywołujemy funkcję bezpośrednio:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">example_function</span><span class="p">()</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="go">Example</span>
</span></code></pre>
</div>
<p>
Zauważ, że podczas przypisywania funkcji do zmiennej pominąłem nawiasy
<code>
()
</code>
. Pominięcie nawiasów powoduje, że do zmiennej
<code>
var
</code>
przypisany jest adres w pamięci, gdzie przechowywane jest kod funkcji. Dopiero wywołanie
<code>
var()
</code>
powoduje taki sam efekt jak bezpośrednie wywołanie funkcji
<code>
example_function()
</code>
.
</p>
<p>
Dodatkowo w ciele funkcji, można zdefiniować inną funkcję. Funkcja wewnętrzna nie będzie jednak mogła być wywołana spoza funkcji, w której jest umieszczona:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">def</span> <span class="nf">external_function</span><span class="p">():</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>    <span class="k">def</span> <span class="nf">internal_function</span><span class="p">():</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">"Internal"</span><span class="p">)</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"External"</span><span class="p">)</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>    <span class="n">internal_function</span><span class="p">()</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="n">external_function</span><span class="p">()</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="go">External</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="go">Internal</span>
</span></code></pre>
</div>
<p>
A co się stanie, jak spróbujemy wywołać funkcję wewnętrzną z zewnątrz?
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">internal_function</span><span class="p">()</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="go">Traceback (most recent call last):</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="go">  File "/.../interactiveshell.py", line 3326, in run_code</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="go">    exec(code_obj, self.user_global_ns, self.user_ns)</span>
</span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="go">  File "&lt;ipython-input-17-6f1c04ea4501&gt;", line 1, in &lt;module&gt;</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="go">    internal_function()</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="go">NameError: name 'internal_function' is not defined</span>
</span></code></pre>
</div>
<p>
Widzimy, że interpreter Pythona nie zna definicji funkcji
<code>
internal_function
</code>
.
</p>
<p>
Skoro już wiemy, że funkcja jest obiektem, to ciekawe czy obiekt może być funkcją?
</p>
<h2 id="czy-obiekt-moze-byc-funkcja">
Czy obiekt może być funkcją?
<a href="#czy-obiekt-moze-byc-funkcja" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
W Pythonie klasy posiadają pewne
<a href="https://docs.python.org/3/reference/datamodel.html#basic-customization">
metody magiczne
</a>
. Jedną z nich jest metoda
<code>
__call__
</code>
. W przypadku klasy funkcja ta umożliwia uruchomienie instancji klasy, tak jak by była funkcją:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">class</span> <span class="nc">FuncClass</span><span class="p">():</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">var</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>
</span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">var</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</span></code></pre>
</div>
<p>
Powyżej widzisz klasę, która ma zaimplementowane 2
<em>
metody magiczne
</em>
:
</p>
<ul>
<li>
<code>
__init__
</code>
, która definiuje zmienną
<code>
var
</code>
jako pustą listę i wywoływana jest podczas inicjalizacji instancji klasy (
<strong>
uwaga
</strong>
, to nie jest konstruktor, choć wiele osób tą metodę tak określa),
</li>
<li>
<code>
__call__
</code>
, która przyjmuje jako argument wywołania dowolny
<code>
element
</code>
i dodanie go do listy w zmiennej
<code>
var
</code>
.
</li>
</ul>
<p>
Powyższa implementacja to nic skomplikowanego. Sprawdźmy zatem, jak zachowuje się taka klasa.
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">f</span> <span class="o">=</span> <span class="n">FuncClass</span><span class="p">()</span>  <span class="c1"># Utworzenie instancji klasy</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="n">f</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Wywołujemy bezpośrednio metodę __call__ instancji f</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">var</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="go">[1]</span>
</span></code></pre>
</div>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="c1"># Tym razem odnosimy się do instancji f z pominięciem metody __call__</span>
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="c1"># (zostanie ona automatycznie wywołana przez interpreter)</span>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="n">f</span><span class="p">(</span><span class="s2">"Drugi"</span><span class="p">)</span>
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">var</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="go">[1, 'Drugi']</span>
</span></code></pre>
</div>
<p>
Widać powyżej, że klasa, może zachowywać się jak funkcja. Każdy obiekt w języku Python może (nie musi) mieć zaimplementowaną metodę
<code>
__call__
</code>
. Skoro tak jest, to sprawdźmy, czy normalna funkcja też ją ma. Wróćmy więc do naszej bardzo prostej funkcji:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Example"</span><span class="p">)</span>
</span></code></pre>
</div>
<p>
Wiemy już, że możemy ją wywołać poprzez
<code>
example_function()
</code>
co w wyniku spowoduje wyświetlenie napisu
<code>
Example
</code>
. A co z metodą
<code>
__call__
</code>
? Sprawdźmy:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">example_function</span><span class="o">.</span><span class="fm">__call__</span><span class="p">()</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="go">Example</span>
</span></code></pre>
</div>
<p>
Udowodniliśmy właśnie, że klasa może zachowywać się jak funkcja, oraz że funkcja jest obiektem. Co prawda obiekt ten jest w pewien sposób ograniczony (nie da się do niego np. dynamicznie dodać zmiennej lub odczytać zmiennych z ciała funkcji), ale jednak jest obiektem.
</p>
<p>
Wróćmy jednak do dekoratorów.
</p>
<h2 id="pierwszy-dekorator">
Pierwszy dekorator
<a href="#pierwszy-dekorator" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
Na początku pisałem, że dekorator to klasa, która opakowuje inną klasę, dodając do opakowywanej klasy nową funkcjonalność. Skoro już wiemy, że funkcja jest klasą/obiektem to w Pythonie dekoratorem może być zarówno funkcja, jak i klasa. Aby sobie nie utrudniać na początku, zacznijmy od implementacji dekoratora w postaci funkcji. Jednak, aby móc zaimplementować dekorator, musimy mieć co udekorować. Rozpatrzmy zatem taką prostą funkcję:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">second</span><span class="p">)</span>
</span></code></pre>
</div>
<p>
Powyższa funkcja ma za zadanie dodać do siebie 2 elementy. Sprawdźmy więc, jak działa:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="go">3</span>
</span></code></pre>
</div>
<p>
Wszystko super. Wynik taki jak się spodziewaliśmy. Sprawdźmy zatem inny zestaw argumentów:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">add</span><span class="p">(</span><span class="s2">"1"</span><span class="p">,</span> <span class="s2">"2"</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="go">12</span>
</span></code></pre>
</div>
<p>
Co? Jak to możliwe, że dostaliśmy
<code>
12
</code>
? Zauważ, że jako argumenty podaliśmy tekst z cyframi 1 i 2, a nie liczby 1 i 2. Interpreter Pythona uznał, że zamiast dodawania dwóch liczb, chcemy połączyć dwa ciągi znaków w jeden dłuższy ciąg znaków. Jak naprawić taki, kod nie zmieniając ciała funkcji
<code>
add
</code>
?
</p>
<p>
Wykorzystamy w tym celu dekorator. Zacznijmy jednak od kilku rzeczy, które pomogą nam zrozumieć jak w swoim wnętrzu działa taki dekorator. Sprawdźmy, jak działa poniższy kod:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Decorated function name: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a>    <span class="k">return</span> <span class="n">func</span>
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a>
</span><span id="__span-23-5"><a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-23-6"><a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">second</span><span class="p">)</span>
</span><span id="__span-23-7"><a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a>
</span><span id="__span-23-8"><a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="n">add</span> <span class="o">=</span> <span class="n">decorator</span><span class="p">(</span><span class="n">add</span><span class="p">)</span>
</span><span id="__span-23-9"><a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="go">Decorated function name: add</span>
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="go">3</span>
</span></code></pre>
</div>
<p>
Implementacji funkcja
<code>
decorator
</code>
jako argument przyjmuje ciało innej funkcji. Ma za zadanie wyświetlić jej nazwę oraz po prostu ją zwrócić.
</p>
<p>
Następnie wykorzystana została właściwość, o której pisałem powyżej, czyli możliwości przypisania funkcji do zmiennej (w tym przypadku funkcję
<code>
add
</code>
przypisujemy do zmiennej o tej samej nazwie, czyli również
<code>
add
</code>
). Takie przypisanie powoduje, że zmienna
<code>
add
</code>
staje się funkcją, która w pierwszej kolejności wywoła dekorator, którego argumentem będzie rzeczywista funkcja
<code>
add
</code>
.
</p>
<p>
Niestety taki zapis jest mało czytelny i nie do końca widać (patrząc tylko na definicję funkcji
<code>
add
</code>
), że została ona udekorowana. W Pythonie na szczęście istnieje na to prosty sposób:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="nd">@decorator</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">second</span><span class="p">)</span>
</span><span id="__span-25-4"><a href="#__codelineno-25-4" id="__codelineno-25-4" name="__codelineno-25-4"></a>
</span><span id="__span-25-5"><a href="#__codelineno-25-5" id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="go">Decorated function name: add</span>
</span><span id="__span-26-2"><a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="go">3</span>
</span></code></pre>
</div>
<p>
Implementację funkcji
<code>
decorator
</code>
pozostawiłem bez zmian, natomiast funkcja
<code>
add
</code>
została udekorowaną. Służy do tego zapis
<code>
@decorator
</code>
tuż powyżej jej definicji.
</p>
<p>
Na końcu funkcja
<code>
add
</code>
została wywołana z dwoma argumentami w taki sam sposób jak wcześniej.
</p>
<p>
W obu przypadkach wynikiem działania jest wyświetlenie nazwy funkcji część, za którąą odpowiedzialny jest dekorator) oraz wynik dodawania dwóch liczb (za to odpowiedzialna jest funkcja
<code>
add
</code>
, która nie została w żaden sposób zmodyfikowana).
</p>
<p>
Notacji z wykorzystaniem
<code>
@decorator
</code>
, jest tzw.
<a href="https://pl.wikipedia.org/wiki/Lukier_składniowy">
syntactic sugar
</a>
dla poprzedniego zapisu
<code>
add = decorator(add)
</code>
.
</p>
<p>
Jeśli używasz już Pythona od pewnego czasu, to powyższy zapis nie powinien być dla Ciebie zupełnie obcy. Zapewne spotkałeś się z nim już nie raz, podczas tworzenia swoich własnych klas, gdzie często wykorzystywane są m.in. następujące dekoratory:
</p>
<ul>
<li>
<code>
@classmethod
</code>
</li>
<li>
<code>
@staticmethod
</code>
</li>
<li>
<code>
@property
</code>
</li>
</ul>
<h2 id="args-i-kwargs">
args i kwargs
<a href="#args-i-kwargs" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
Wiemy już, jak stworzyć prosty (jeszcze nic nierobiący) dekorator. Skoro do środka dekoratora przekazujemy funkcję, to gdzieś powinny być jeszcze widoczne wszystkie argumenty, które do danej funkcji są przekazywane w momencie jej wywołania. Rozważmy poniższą definicję dekoratora (implementację funkcji
<code>
add
</code>
pominę, gdyż założyliśmy na początku, że jej nie zmieniamy):
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"args (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"kwargs (type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">kwargs</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</span></code></pre>
</div>
<p>
Do definicji wewnętrznej funkcji
<code>
wrapper
</code>
dodałem dwa atrybuty:
</p>
<ul>
<li>
<code>
*args
</code>
</li>
<li>
<code>
**kwargs
</code>
</li>
</ul>
<p>
Zobaczmy teraz, co się stanie, jak wywołamy poniższy kod:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="go">args (type: &lt;class 'tuple'&gt;): (1, 2)</span>
</span><span id="__span-29-2"><a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="go">kwargs (type: &lt;class 'dict'&gt;): {}</span>
</span></code></pre>
</div>
<p>
Widzimy, że argumenty przekazane do funkcji tworzą zmienną
<code>
args
</code>
o typie
<em>
touple
</em>
(
<em>
krotka
</em>
), natomiast zmienną
<code>
kwargs
</code>
jest typu
<em>
dict
</em>
(
<em>
słownik
</em>
), ale jest to pusty słownik.
</p>
<p>
Co się stanie, jak wywołamy funkcję
<code>
add
</code>
w inny sposób:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="n">add</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-31-1"><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="go">*args (type: &lt;class 'tuple'&gt;): ()</span>
</span><span id="__span-31-2"><a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="go">**kwargs (type: &lt;class 'dict'&gt;): {'first': 1, 'second': 2}</span>
</span></code></pre>
</div>
<p>
Widzimy teraz, że
<code>
args
</code>
jest puste, natomiast
<code>
kwargs
</code>
zostało wypełnione.
</p>
<p>
Możemy wywołać funkcję
<code>
add
</code>
również jako miks powyższych wywołań:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-32-1"><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-33-1"><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="go">*args (type: &lt;class 'tuple'&gt;): (1,)</span>
</span><span id="__span-33-2"><a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="go">**kwargs (type: &lt;class 'dict'&gt;): {'second': 2}</span>
</span></code></pre>
</div>
<p>
Teraz zarówno
<code>
args
</code>
jak i
<code>
kwargs
</code>
zostały wypełnione.
</p>
<p>
Domyślasz się już zapewne czym są
<code>
args
</code>
i
<code>
kwargs
</code>
, ale dla ścisłości odpowiedzmy sobie na pytanie:
</p>
<ul>
<li>
<code>
*args
</code>
- nienazwane argumenty przekazywane do funkcji przyjmujące postać
<em>
krotki
</em>
ze względu na zachowanie kolejności argumentów,
</li>
<li>
<code>
**kwargs
</code>
- nazwane argumenty przekazywane do funkcji przyjmujące postać
<em>
słownika
</em>
ze względu na powiązanie nazwy argumentu (
<em>
key
</em>
), z jej wartością (
<em>
value
</em>
).
</li>
</ul>
<p>
Możliwość przekazania argumentów do funkcji przy użyciu
<code>
args
</code>
i
<code>
kwargs
</code>
niesie za sobą pewne implikacje. Najważniejszą implikacją jest konieczność obsłużenia obu przypadków w ciele dekoratora, jeśli chcemy wykonać jakieś operacje na atrybutach przekazywanych do dekorowanej funkcji.
</p>
<p>
Wróćmy teraz do napisania dekoratora, który ma za zadanie sprawdzić typ argumentów przekazywanych do funkcji
<code>
add
</code>
tak, aby przeprowadziła działanie dodawania dwóch liczb.
</p>
<p>
Przyjmijmy najprostsze założenie, że aby funkcja zadziałała poprawnie, argumenty funkcji muszą być typu
<em>
int
</em>
lub
<em>
float
</em>
. W przypadku, jeśli dowolny z argumentów będzie innym typem, funkcja nie zostanie uruchomiona i zostanie zwrócony wyjątek typu
<em>
TypeErrror
</em>
.
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-34-1"><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-34-2"><a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-34-3"><a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a>        <span class="c1"># Zmienna określająca czy typy argumentów są poprawne</span>
</span><span id="__span-34-4"><a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a>        <span class="n">is_correct</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-34-5"><a href="#__codelineno-34-5" id="__codelineno-34-5" name="__codelineno-34-5"></a>        <span class="c1"># Utworzenie kopi listy argumentów</span>
</span><span id="__span-34-6"><a href="#__codelineno-34-6" id="__codelineno-34-6" name="__codelineno-34-6"></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-34-7"><a href="#__codelineno-34-7" id="__codelineno-34-7" name="__codelineno-34-7"></a>        <span class="c1"># Rozszerzenie listy argumentów</span>
</span><span id="__span-34-8"><a href="#__codelineno-34-8" id="__codelineno-34-8" name="__codelineno-34-8"></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-34-9"><a href="#__codelineno-34-9" id="__codelineno-34-9" name="__codelineno-34-9"></a>
</span><span id="__span-34-10"><a href="#__codelineno-34-10" id="__codelineno-34-10" name="__codelineno-34-10"></a>        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
</span><span id="__span-34-11"><a href="#__codelineno-34-11" id="__codelineno-34-11" name="__codelineno-34-11"></a>            <span class="c1"># Poniższe wyrażenia zawiera w sobie dwie ciekawe</span>
</span><span id="__span-34-12"><a href="#__codelineno-34-12" id="__codelineno-34-12" name="__codelineno-34-12"></a>            <span class="c1"># konstrukcje:</span>
</span><span id="__span-34-13"><a href="#__codelineno-34-13" id="__codelineno-34-13" name="__codelineno-34-13"></a>            <span class="c1"># 1. tzw. short if sprawdzający czy podany argument jest</span>
</span><span id="__span-34-14"><a href="#__codelineno-34-14" id="__codelineno-34-14" name="__codelineno-34-14"></a>            <span class="c1"># typu int lub float i zwracający odpowiednią wartość</span>
</span><span id="__span-34-15"><a href="#__codelineno-34-15" id="__codelineno-34-15" name="__codelineno-34-15"></a>            <span class="c1"># 2. operator mnożenia z przypisaniem *= powoduje, że gdy</span>
</span><span id="__span-34-16"><a href="#__codelineno-34-16" id="__codelineno-34-16" name="__codelineno-34-16"></a>            <span class="c1"># choć jeden z atrybutów nie będzie odpowiedniego typy</span>
</span><span id="__span-34-17"><a href="#__codelineno-34-17" id="__codelineno-34-17" name="__codelineno-34-17"></a>            <span class="c1"># to zmienna is_correct przybierze wartość False</span>
</span><span id="__span-34-18"><a href="#__codelineno-34-18" id="__codelineno-34-18" name="__codelineno-34-18"></a>            <span class="n">is_correct</span> <span class="o">*=</span> <span class="kc">True</span> <span class="k">if</span> \
</span><span id="__span-34-19"><a href="#__codelineno-34-19" id="__codelineno-34-19" name="__codelineno-34-19"></a>                <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="k">else</span> <span class="kc">False</span>
</span><span id="__span-34-20"><a href="#__codelineno-34-20" id="__codelineno-34-20" name="__codelineno-34-20"></a>
</span><span id="__span-34-21"><a href="#__codelineno-34-21" id="__codelineno-34-21" name="__codelineno-34-21"></a>        <span class="k">if</span> <span class="n">is_correct</span><span class="p">:</span>
</span><span id="__span-34-22"><a href="#__codelineno-34-22" id="__codelineno-34-22" name="__codelineno-34-22"></a>            <span class="c1"># Przekazanie argumentów do dekorowanej funkcji,</span>
</span><span id="__span-34-23"><a href="#__codelineno-34-23" id="__codelineno-34-23" name="__codelineno-34-23"></a>            <span class="c1"># która zostaje wywołana, a jej wynik zwrócony</span>
</span><span id="__span-34-24"><a href="#__codelineno-34-24" id="__codelineno-34-24" name="__codelineno-34-24"></a>            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-34-25"><a href="#__codelineno-34-25" id="__codelineno-34-25" name="__codelineno-34-25"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-34-26"><a href="#__codelineno-34-26" id="__codelineno-34-26" name="__codelineno-34-26"></a>            <span class="c1"># Zwrócenie wyjątku, gdy choć jeden atrybut przekazany do</span>
</span><span id="__span-34-27"><a href="#__codelineno-34-27" id="__codelineno-34-27" name="__codelineno-34-27"></a>            <span class="c1"># funkcji nie jest typu int lub float</span>
</span><span id="__span-34-28"><a href="#__codelineno-34-28" id="__codelineno-34-28" name="__codelineno-34-28"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"One of the arguments is not int or float"</span><span class="p">)</span>
</span><span id="__span-34-29"><a href="#__codelineno-34-29" id="__codelineno-34-29" name="__codelineno-34-29"></a>
</span><span id="__span-34-30"><a href="#__codelineno-34-30" id="__codelineno-34-30" name="__codelineno-34-30"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</span><span id="__span-34-31"><a href="#__codelineno-34-31" id="__codelineno-34-31" name="__codelineno-34-31"></a>
</span><span id="__span-34-32"><a href="#__codelineno-34-32" id="__codelineno-34-32" name="__codelineno-34-32"></a><span class="nd">@decorator</span>
</span><span id="__span-34-33"><a href="#__codelineno-34-33" id="__codelineno-34-33" name="__codelineno-34-33"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-34-34"><a href="#__codelineno-34-34" id="__codelineno-34-34" name="__codelineno-34-34"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">second</span><span class="p">)</span>
</span></code></pre>
</div>
<p>
Mam nadzieję, że powyższy kod jest dla Ciebie zrozumiały (umieściłem odpowiednie komentarze w samym kodzie, aby lepiej wyjaśnić, co on robi).
</p>
<p>
Jeśli jednak masz problem ze zrozumieniem zapisu
<code>
is_correct *= True if any(isinstance(arg, t) for t in [int, float]) else False
</code>
poniżej umieszczam jego ekwiwalent:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-35-1"><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="n">is_correct_helper</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-35-2"><a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="__span-35-3"><a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
</span><span id="__span-35-4"><a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a>        <span class="n">is_correct_helper</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-35-5"><a href="#__codelineno-35-5" id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="n">is_correct</span> <span class="o">*=</span> <span class="n">is_correct_helper</span>
</span></code></pre>
</div>
<p>
Zauważ jednak, że ten kawałek kodu wymaga wprowadzenia dodatkowej zmiennej pomocniczej
<code>
is_correct_helper
</code>
i nie jest tak zwięzły , jakwcześniejszy zapis, a którego będę używał w późniejszych przykładach. Sprawdźmy teraz, czy powyższy kod działa poprawnie dla argumentów o poprawnych typach:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-36-1"><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-37-1"><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="go">3.0</span>
</span></code></pre>
</div>
<p>
Wynik jest poprawny. A co jeśli jeden z argumentów będzie ciągiem znaków?
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-38-1"><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"2.0"</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-39-1"><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="go">Traceback (most recent call last):</span>
</span><span id="__span-39-2"><a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="go">  File "/.../interactiveshell.py", line 3326, in run_code</span>
</span><span id="__span-39-3"><a href="#__codelineno-39-3" id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="go">    exec(code_obj, self.user_global_ns, self.user_ns)</span>
</span><span id="__span-39-4"><a href="#__codelineno-39-4" id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="go">  File "&lt;ipython-input-2-fc0327af835d&gt;", line 20, in &lt;module&gt;</span>
</span><span id="__span-39-5"><a href="#__codelineno-39-5" id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="go">    add(1, "2.0")</span>
</span><span id="__span-39-6"><a href="#__codelineno-39-6" id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="go">  File "&lt;ipython-input-2-fc0327af835d&gt;", line 13, in wrapper</span>
</span><span id="__span-39-7"><a href="#__codelineno-39-7" id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="go">    raise TypeError("One of the arguments is not int or float")</span>
</span><span id="__span-39-8"><a href="#__codelineno-39-8" id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="go">TypeError: One of the arguments is not int or float</span>
</span></code></pre>
</div>
<p>
Zgodnie z podejrzeniem wynikiem działania jest wyjątek typu
<em>
TypeError
</em>
, a więc taki jaki zakładaliśmy.
</p>
<p>
Widzimy więc, że nasz dekorator działa tak, jak tego oczekiwaliśmy, a nasza funkcja dekorowana (
<code>
add
</code>
) nie została zmodyfikowana.
</p>
<h2 id="wraps">
wraps
<a href="#wraps" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
Rozważmy teraz inną kwestię, tzn. dokumentację do naszego kodu. Do tej pory w naszym kodzie, nie ma ani jednej linijki opisującej czym nasza dekorowana funkcja się zajmuje. Dodajmy najprostszą możliwą formę dokumentacji, czyli pojedynczą linię komentarza pod definicją funkcji (zauważ, że pominąłem dodanie dekoratora):
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-40-1"><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-40-2"><a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">    </span><span class="sd">"""Add to elements and print the result"""</span>
</span><span id="__span-40-3"><a href="#__codelineno-40-3" id="__codelineno-40-3" name="__codelineno-40-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">second</span><span class="p">)</span>
</span></code></pre>
</div>
<p>
Spróbujmy teraz wywołać jedną z metod, która wykorzystywana jest przez narzędzia do budowania dokumentacji kodu, np.
<a href="http://www.sphinx-doc.org/en/master/">
Sphinx
</a>
.
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-41-1"><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-42-1"><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="go">Add to elements and print the result</span>
</span></code></pre>
</div>
<p>
Widzimy, że poprzez wywołanie jednej z
<em>
metod magicznych
</em>
możemy dostać się do naszego opisu funkcji. Sprawdźmy teraz, co się stanie, jak udekorujemy funkcję naszym dekoratorem:
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-43-1"><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="nd">@decorator</span>
</span><span id="__span-43-2"><a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-43-3"><a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="w">    </span><span class="sd">"""Add to elements and print the result"""</span>
</span><span id="__span-43-4"><a href="#__codelineno-43-4" id="__codelineno-43-4" name="__codelineno-43-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">second</span><span class="p">)</span>
</span><span id="__span-43-5"><a href="#__codelineno-43-5" id="__codelineno-43-5" name="__codelineno-43-5"></a>
</span><span id="__span-43-6"><a href="#__codelineno-43-6" id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-44-1"><a href="#__codelineno-44-1" id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="go">None</span>
</span></code></pre>
</div>
<p>
Dekorator wszystko nam popsuł |disappointed|.
</p>
<p>
Dlaczego tak się dzieje? Otóż
<code>
add.__doc__
</code>
pobiera teraz opis nie z funkcji
<code>
add
</code>
, a z dekoratora.
</p>
<p>
Możemy to rozwiązać bardzo łopatologicznie, ale ponieważ ktoś już o tym pomyślał, to wykorzystamy gotową funkcję. Wchodzi ona w skład bibliotek standardowych i jest częścią pakietu
<a href="https://docs.python.org/2/library/functools.html">
functools
</a>
. Zaimportujmy zatem funkcję
<code>
wraps
</code>
i jej użyjmy (funkcja
<code>
add
</code>
pozostaje bez zmian).
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-45-1"><a href="#__codelineno-45-1" id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
</span><span id="__span-45-2"><a href="#__codelineno-45-2" id="__codelineno-45-2" name="__codelineno-45-2"></a>
</span><span id="__span-45-3"><a href="#__codelineno-45-3" id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-45-4"><a href="#__codelineno-45-4" id="__codelineno-45-4" name="__codelineno-45-4"></a>    <span class="nd">@wraps</span>
</span><span id="__span-45-5"><a href="#__codelineno-45-5" id="__codelineno-45-5" name="__codelineno-45-5"></a>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-45-6"><a href="#__codelineno-45-6" id="__codelineno-45-6" name="__codelineno-45-6"></a>        <span class="n">is_correct</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-45-7"><a href="#__codelineno-45-7" id="__codelineno-45-7" name="__codelineno-45-7"></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-45-8"><a href="#__codelineno-45-8" id="__codelineno-45-8" name="__codelineno-45-8"></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-45-9"><a href="#__codelineno-45-9" id="__codelineno-45-9" name="__codelineno-45-9"></a>
</span><span id="__span-45-10"><a href="#__codelineno-45-10" id="__codelineno-45-10" name="__codelineno-45-10"></a>        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
</span><span id="__span-45-11"><a href="#__codelineno-45-11" id="__codelineno-45-11" name="__codelineno-45-11"></a>            <span class="n">is_correct</span> <span class="o">*=</span> <span class="kc">True</span> <span class="k">if</span> \
</span><span id="__span-45-12"><a href="#__codelineno-45-12" id="__codelineno-45-12" name="__codelineno-45-12"></a>                <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="k">else</span> <span class="kc">False</span>
</span><span id="__span-45-13"><a href="#__codelineno-45-13" id="__codelineno-45-13" name="__codelineno-45-13"></a>
</span><span id="__span-45-14"><a href="#__codelineno-45-14" id="__codelineno-45-14" name="__codelineno-45-14"></a>        <span class="k">if</span> <span class="n">is_correct</span><span class="p">:</span>
</span><span id="__span-45-15"><a href="#__codelineno-45-15" id="__codelineno-45-15" name="__codelineno-45-15"></a>            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-45-16"><a href="#__codelineno-45-16" id="__codelineno-45-16" name="__codelineno-45-16"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-45-17"><a href="#__codelineno-45-17" id="__codelineno-45-17" name="__codelineno-45-17"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">"One of the arguments is not int or float"</span><span class="p">)</span>
</span><span id="__span-45-18"><a href="#__codelineno-45-18" id="__codelineno-45-18" name="__codelineno-45-18"></a>
</span><span id="__span-45-19"><a href="#__codelineno-45-19" id="__codelineno-45-19" name="__codelineno-45-19"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</span><span id="__span-45-20"><a href="#__codelineno-45-20" id="__codelineno-45-20" name="__codelineno-45-20"></a>
</span><span id="__span-45-21"><a href="#__codelineno-45-21" id="__codelineno-45-21" name="__codelineno-45-21"></a><span class="nb">print</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-text">
<pre><span></span><code><span id="__span-46-1"><a href="#__codelineno-46-1" id="__codelineno-46-1" name="__codelineno-46-1"></a>Add to elements and print the result
</span></code></pre>
</div>
<p>
Zauważ, że funkcja ta została wykorzystana do udekorowania funkcji wewnętrznej naszego dekoratora i że dokumentacja została poprawnie wyświetlona. Funkcja ta poprawia wyświetlanie również innych wartości, które nadpisywane są przez użycie dekoratora, ale po więcej szczegółów odsyłam do
<a href="https://docs.python.org/3/library/functools.html#functools.wraps">
dokumentacji
</a>
.
</p>
<h2 id="dekorator-z-parametrami">
Dekorator z parametrami
<a href="#dekorator-z-parametrami" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
A co gdybyśmy chcieli np. wymusić, aby dekorator (poza już istniejącą implementacją) sprawdzał, czy oba parametry były tego samego typu? Musielibyśmy być w stanie przekazać do dekoratora jakieś dodatkowy parametr. Skoro wiemy, że dekorator jest funkcją, to być może dałoby się do takiego dekoratora przekazać ten parametr jako argument funkcji? Sprawdźmy więc.
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-47-1"><a href="#__codelineno-47-1" id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">args_type_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># Dekorator z argumentem</span>
</span><span id="__span-47-2"><a href="#__codelineno-47-2" id="__codelineno-47-2" name="__codelineno-47-2"></a>    <span class="k">def</span> <span class="nf">inner_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>  <span class="c1"># Wcześniejszy dekorator</span>
</span><span id="__span-47-3"><a href="#__codelineno-47-3" id="__codelineno-47-3" name="__codelineno-47-3"></a>        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-47-4"><a href="#__codelineno-47-4" id="__codelineno-47-4" name="__codelineno-47-4"></a>            <span class="n">is_correct</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-47-5"><a href="#__codelineno-47-5" id="__codelineno-47-5" name="__codelineno-47-5"></a>            <span class="n">arguments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-47-6"><a href="#__codelineno-47-6" id="__codelineno-47-6" name="__codelineno-47-6"></a>            <span class="n">arguments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-47-7"><a href="#__codelineno-47-7" id="__codelineno-47-7" name="__codelineno-47-7"></a>
</span><span id="__span-47-8"><a href="#__codelineno-47-8" id="__codelineno-47-8" name="__codelineno-47-8"></a>            <span class="c1"># Zmienna pomocnicza użyta podczas sprawdzania typów,</span>
</span><span id="__span-47-9"><a href="#__codelineno-47-9" id="__codelineno-47-9" name="__codelineno-47-9"></a>            <span class="c1"># która przyjmuje przyjmuje listę typów przekazaną do</span>
</span><span id="__span-47-10"><a href="#__codelineno-47-10" id="__codelineno-47-10" name="__codelineno-47-10"></a>            <span class="c1"># dekoratora lub domyślną listę typów</span>
</span><span id="__span-47-11"><a href="#__codelineno-47-11" id="__codelineno-47-11" name="__codelineno-47-11"></a>            <span class="n">types_list</span> <span class="o">=</span> <span class="n">args_type_list</span> <span class="k">if</span> \
</span><span id="__span-47-12"><a href="#__codelineno-47-12" id="__codelineno-47-12" name="__codelineno-47-12"></a>                <span class="nb">isinstance</span><span class="p">(</span><span class="n">args_type_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
</span><span id="__span-47-13"><a href="#__codelineno-47-13" id="__codelineno-47-13" name="__codelineno-47-13"></a>
</span><span id="__span-47-14"><a href="#__codelineno-47-14" id="__codelineno-47-14" name="__codelineno-47-14"></a>            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
</span><span id="__span-47-15"><a href="#__codelineno-47-15" id="__codelineno-47-15" name="__codelineno-47-15"></a>                <span class="c1"># Lista typów zamieniona na zmienną pomocniczą</span>
</span><span id="__span-47-16"><a href="#__codelineno-47-16" id="__codelineno-47-16" name="__codelineno-47-16"></a>                <span class="n">is_correct</span> <span class="o">*=</span> <span class="kc">True</span> <span class="k">if</span> \
</span><span id="__span-47-17"><a href="#__codelineno-47-17" id="__codelineno-47-17" name="__codelineno-47-17"></a>                    <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types_list</span><span class="p">)</span> \
</span><span id="__span-47-18"><a href="#__codelineno-47-18" id="__codelineno-47-18" name="__codelineno-47-18"></a>                    <span class="k">else</span> <span class="kc">False</span>
</span><span id="__span-47-19"><a href="#__codelineno-47-19" id="__codelineno-47-19" name="__codelineno-47-19"></a>
</span><span id="__span-47-20"><a href="#__codelineno-47-20" id="__codelineno-47-20" name="__codelineno-47-20"></a>            <span class="k">if</span> <span class="n">is_correct</span><span class="p">:</span>
</span><span id="__span-47-21"><a href="#__codelineno-47-21" id="__codelineno-47-21" name="__codelineno-47-21"></a>                <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-47-22"><a href="#__codelineno-47-22" id="__codelineno-47-22" name="__codelineno-47-22"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-47-23"><a href="#__codelineno-47-23" id="__codelineno-47-23" name="__codelineno-47-23"></a>                <span class="c1"># Drobna modyfikacja</span>
</span><span id="__span-47-24"><a href="#__codelineno-47-24" id="__codelineno-47-24" name="__codelineno-47-24"></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"One of the arguments is not one type of: "</span>
</span><span id="__span-47-25"><a href="#__codelineno-47-25" id="__codelineno-47-25" name="__codelineno-47-25"></a>                                <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">types_list</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-47-26"><a href="#__codelineno-47-26" id="__codelineno-47-26" name="__codelineno-47-26"></a>        <span class="k">return</span> <span class="n">wrapper</span>
</span><span id="__span-47-27"><a href="#__codelineno-47-27" id="__codelineno-47-27" name="__codelineno-47-27"></a>    <span class="k">return</span> <span class="n">inner_decorator</span>
</span></code></pre>
</div>
<p>
Wprowadziliśmy tutaj dodatkowy poziom zagnieżdżenia się oraz dokonaliśmy drobnej modyfikacji podczas sprawdzenia typów (wszystkie zmiany opatrzone zostały komentarzem w kodzie).
</p>
<p>
Sprawdźmy teraz jak udekorować naszą funkcję i jakie wyniki zostaną wyświetlone, jak spróbujemy jej użyć.
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-48-1"><a href="#__codelineno-48-1" id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="nd">@decorator</span><span class="p">([</span><span class="nb">int</span><span class="p">])</span>  <span class="c1"># Wywołanie dekoratora z parametrem</span>
</span><span id="__span-48-2"><a href="#__codelineno-48-2" id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-48-3"><a href="#__codelineno-48-3" id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="w">    </span><span class="sd">"""Add to elements and print the result"""</span>
</span><span id="__span-48-4"><a href="#__codelineno-48-4" id="__codelineno-48-4" name="__codelineno-48-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">second</span><span class="p">)</span>
</span><span id="__span-48-5"><a href="#__codelineno-48-5" id="__codelineno-48-5" name="__codelineno-48-5"></a>
</span><span id="__span-48-6"><a href="#__codelineno-48-6" id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-49-1"><a href="#__codelineno-49-1" id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="go">3</span>
</span></code></pre>
</div>
<p>
Nic wielkiego, wszystko jest ok. A jak zmienimy typ jednego z argumentów wywołania funkcji
<code>
add
</code>
?
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-50-1"><a href="#__codelineno-50-1" id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
</span></code></pre>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-51-1"><a href="#__codelineno-51-1" id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="go">Traceback (most recent call last):</span>
</span><span id="__span-51-2"><a href="#__codelineno-51-2" id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="go">  File "/.../interactiveshell.py", line 3326, in run_code</span>
</span><span id="__span-51-3"><a href="#__codelineno-51-3" id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="go">    exec(code_obj, self.user_global_ns, self.user_ns)</span>
</span><span id="__span-51-4"><a href="#__codelineno-51-4" id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="go">  File "&lt;ipython-input-2-7a51c39f1784&gt;", line 38, in &lt;module&gt;</span>
</span><span id="__span-51-5"><a href="#__codelineno-51-5" id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="go">    add(1, 2.0)</span>
</span><span id="__span-51-6"><a href="#__codelineno-51-6" id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="go">  File "&lt;ipython-input-2-7a51c39f1784&gt;", line 21, in wrapper</span>
</span><span id="__span-51-7"><a href="#__codelineno-51-7" id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="go">    raise TypeError(f"One of the arguments is not one type of: "</span>
</span><span id="__span-51-8"><a href="#__codelineno-51-8" id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="go">TypeError: One of the arguments is not one type of: [&lt;class 'int'&gt;]</span>
</span></code></pre>
</div>
<p>
Super. Wynik spodziewany, ponieważ jeden z argumentów jest typu
<em>
float
</em>
.
</p>
<p>
Niestety, jeśli spróbujemy teraz użyć dekoratora bez parametrów, czyli zamiast zapisu
<code>
decorator(...)
</code>
użyjemy
<code>
decorator
</code>
tak jak wcześniej, otrzymamy następujący komunikat o błędzie:
</p>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-52-1"><a href="#__codelineno-52-1" id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="go">Traceback (most recent call last):</span>
</span><span id="__span-52-2"><a href="#__codelineno-52-2" id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="go">  File "/.../interactiveshell.py", line 3326, in run_code</span>
</span><span id="__span-52-3"><a href="#__codelineno-52-3" id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="go">    exec(code_obj, self.user_global_ns, self.user_ns)</span>
</span><span id="__span-52-4"><a href="#__codelineno-52-4" id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="go">  File "&lt;ipython-input-3-50502c662126&gt;", line 38, in &lt;module&gt;</span>
</span><span id="__span-52-5"><a href="#__codelineno-52-5" id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="go">    add(1, 2.0)</span>
</span><span id="__span-52-6"><a href="#__codelineno-52-6" id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="go">TypeError: inner_decorator() takes 1 positional argument but 2 were given</span>
</span></code></pre>
</div>
<p>
Czy możemy sobie z tym problemem jakoś poradzić?
</p>
<p>
<img src="../../images/posts/2020/dekoratory-w-pythonie_this_is_python.jpg" alt="This is Python !!!" loading="lazy">
</p>
<p>
Oczywiście. Co ciekawe, taka modyfikacja wcale nie jest taka trudna do zrobienia. Wystarczy zmienić jedną linijkę kodu w dekoratorze.
</p>
<p>
Przeprowadźmy więc wymaganą modyfikację oraz sprawdźmy stary zapis dekoratora wraz z wywołaniem udekorowanej funkcji:
</p>
<div class="highlight language-py">
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span><span class="normal"><a href="#__codelineno-53-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-53-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-53-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-53-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-53-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-53-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span>
<span class="normal"><a href="#__codelineno-53-11">11</a></span>
<span class="normal"><a href="#__codelineno-53-12">12</a></span>
<span class="normal"><a href="#__codelineno-53-13">13</a></span>
<span class="normal"><a href="#__codelineno-53-14">14</a></span>
<span class="normal"><a href="#__codelineno-53-15">15</a></span>
<span class="normal"><a href="#__codelineno-53-16">16</a></span>
<span class="normal"><a href="#__codelineno-53-17">17</a></span>
<span class="normal"><a href="#__codelineno-53-18">18</a></span>
<span class="normal"><a href="#__codelineno-53-19">19</a></span>
<span class="normal"><a href="#__codelineno-53-20">20</a></span>
<span class="normal"><a href="#__codelineno-53-21">21</a></span>
<span class="normal"><a href="#__codelineno-53-22">22</a></span>
<span class="normal"><a href="#__codelineno-53-23">23</a></span>
<span class="normal"><a href="#__codelineno-53-24">24</a></span>
<span class="normal"><a href="#__codelineno-53-25">25</a></span>
<span class="normal"><a href="#__codelineno-53-26">26</a></span>
<span class="normal"><a href="#__codelineno-53-27">27</a></span>
<span class="normal"><a href="#__codelineno-53-28">28</a></span>
<span class="normal"><a href="#__codelineno-53-29">29</a></span>
<span class="normal"><a href="#__codelineno-53-30">30</a></span>
<span class="normal"><a href="#__codelineno-53-31">31</a></span>
<span class="normal"><a href="#__codelineno-53-32">32</a></span>
<span class="normal"><a href="#__codelineno-53-33">33</a></span></pre>
</div>
</td>
<td class="code">
<div>
<pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">args_type_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a>    <span class="k">def</span> <span class="nf">inner_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a>        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a>            <span class="n">is_correct</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5"></a>            <span class="n">arguments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6"></a>            <span class="n">arguments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7"></a>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8"></a>            <span class="n">types_list</span> <span class="o">=</span> <span class="n">args_type_list</span> <span class="k">if</span> \
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9"></a>                <span class="nb">isinstance</span><span class="p">(</span><span class="n">args_type_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10"></a>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11"></a>            <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12"></a>                <span class="n">is_correct</span> <span class="o">*=</span> <span class="kc">True</span> <span class="k">if</span> \
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13"></a>                    <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types_list</span><span class="p">)</span> \
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14"></a>                    <span class="k">else</span> <span class="kc">False</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15"></a>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16"></a>            <span class="k">if</span> <span class="n">is_correct</span><span class="p">:</span>
</span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17"></a>                <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18"></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="__span-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19"></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"One of the arguments is not one type of: "</span>
</span><span id="__span-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20"></a>                                <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">types_list</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21"></a>        <span class="k">return</span> <span class="n">wrapper</span>
</span><span id="__span-53-22"><a id="__codelineno-53-22" name="__codelineno-53-22"></a>
</span><span id="__span-53-23"><a id="__codelineno-53-23" name="__codelineno-53-23"></a>    <span class="c1"># Tutaj następuje zmiana tego, co przez dekorator jest zwracane</span>
</span><span id="__span-53-24"><a id="__codelineno-53-24" name="__codelineno-53-24"></a>    <span class="c1"># w zależności od tego czy przekażemy argumenty do dekoratora czy nie</span>
</span><span id="__span-53-25"><a id="__codelineno-53-25" name="__codelineno-53-25"></a>    <span class="k">return</span> <span class="n">inner_decorator</span><span class="p">(</span><span class="n">args_type_list</span><span class="p">)</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">args_type_list</span><span class="p">)</span> \
</span><span id="__span-53-26"><a id="__codelineno-53-26" name="__codelineno-53-26"></a>        <span class="k">else</span> <span class="n">inner_decorator</span>
</span><span id="__span-53-27"><a id="__codelineno-53-27" name="__codelineno-53-27"></a>
</span><span id="__span-53-28"><a id="__codelineno-53-28" name="__codelineno-53-28"></a><span class="nd">@decorator</span>
</span><span id="__span-53-29"><a id="__codelineno-53-29" name="__codelineno-53-29"></a><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">second</span><span class="p">):</span>
</span><span id="__span-53-30"><a id="__codelineno-53-30" name="__codelineno-53-30"></a><span class="w">    </span><span class="sd">"""Add to elements and print the result"""</span>
</span><span id="__span-53-31"><a id="__codelineno-53-31" name="__codelineno-53-31"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">first</span> <span class="o">+</span> <span class="n">second</span><span class="p">)</span>
</span><span id="__span-53-32"><a id="__codelineno-53-32" name="__codelineno-53-32"></a>
</span><span id="__span-53-33"><a id="__codelineno-53-33" name="__codelineno-53-33"></a><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
</span></code></pre>
</div>
</td>
</tr>
</table>
</div>
<div class="highlight language-console">
<pre><span></span><code><span id="__span-54-1"><a href="#__codelineno-54-1" id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="go">3.0</span>
</span></code></pre>
</div>
<p>
We własnym zakresie sprawdź jeszcze, czy przekazanie argumentów do dekoratora również działa |wink|.
</p>
<p>
Dlaczego w ogóle taka modyfikacja była potrzebna? Zauważ, czym różnią się oba zapisy dekoratora:
</p>
<ol>
<li>
<code>
decorator
</code>
- przekazanie adresu pamięci do funkcji (pisałem o tym wcześniej)
</li>
<li>
<code>
decorator(...)
</code>
- wywołanie funkcji z parametrami
</li>
</ol>
<p>
Powyższe zapisy powoduję, że do zmiennej
<code>
args_type_list
</code>
przypisane są zupełnie inne wartości:
</p>
<ol>
<li>
<code>
args_type_list
</code>
jest adresem dekorowanej funkcji (w naszym przypadku będzie to
<code>
add
</code>
,
</li>
<li>
<code>
args_type_list
</code>
jest argumentem przekazanym do dekoratora (w naszym przypadku będzie to lista typów do przeprowadzenia weryfikacji).
</li>
</ol>
<p>
Dlatego też musimy sprawdzić, czy przekazywany argument jest funkcją, czy nie. Do tego służy funkcja
<code>
callable()
</code>
.
</p>
<p>
A może dałoby się to ciut prościej zrobić? Poza tym co z kwestią dokumentacji itp.
</p>
<h2 id="partial">
partial
<a href="#partial" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
Po raz kolejny z pomocą przychodzi nam biblioteka
<code>
functools
</code>
. Tym razem jednak skorzystamy jednocześnie z poznanej wcześniej funkcji
<code>
wraps
</code>
oraz nowej
<a href="https://docs.python.org/3/library/functools.html#functools.partial">
partial
</a>
. Spójrzmy na poniższy kod (ponownie dekorowana funkcja
<code>
add
</code>
pozostaje bez zmian).
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-55-1"><a href="#__codelineno-55-1" id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span><span class="p">,</span> <span class="n">partial</span>
</span><span id="__span-55-2"><a href="#__codelineno-55-2" id="__codelineno-55-2" name="__codelineno-55-2"></a>
</span><span id="__span-55-3"><a href="#__codelineno-55-3" id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">args_type_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-55-4"><a href="#__codelineno-55-4" id="__codelineno-55-4" name="__codelineno-55-4"></a>    <span class="c1"># Poniższy if sprawdza czy argument func jest wywołaniem funkcji</span>
</span><span id="__span-55-5"><a href="#__codelineno-55-5" id="__codelineno-55-5" name="__codelineno-55-5"></a>    <span class="c1"># czy zwykłym argumentem (rozwinięcie tego tematu w tekście poniżej)</span>
</span><span id="__span-55-6"><a href="#__codelineno-55-6" id="__codelineno-55-6" name="__codelineno-55-6"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-55-7"><a href="#__codelineno-55-7" id="__codelineno-55-7" name="__codelineno-55-7"></a>        <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="n">decorator</span><span class="p">,</span>
</span><span id="__span-55-8"><a href="#__codelineno-55-8" id="__codelineno-55-8" name="__codelineno-55-8"></a>                       <span class="n">args_type_list</span><span class="o">=</span><span class="n">args_type_list</span> <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">func</span><span class="p">)</span>
</span><span id="__span-55-9"><a href="#__codelineno-55-9" id="__codelineno-55-9" name="__codelineno-55-9"></a>
</span><span id="__span-55-10"><a href="#__codelineno-55-10" id="__codelineno-55-10" name="__codelineno-55-10"></a>    <span class="c1"># Implementacja funkcji 'wrapper' pozostaje bez zmian</span>
</span><span id="__span-55-11"><a href="#__codelineno-55-11" id="__codelineno-55-11" name="__codelineno-55-11"></a>    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="__span-55-12"><a href="#__codelineno-55-12" id="__codelineno-55-12" name="__codelineno-55-12"></a>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-55-13"><a href="#__codelineno-55-13" id="__codelineno-55-13" name="__codelineno-55-13"></a>        <span class="n">is_correct</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-55-14"><a href="#__codelineno-55-14" id="__codelineno-55-14" name="__codelineno-55-14"></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-55-15"><a href="#__codelineno-55-15" id="__codelineno-55-15" name="__codelineno-55-15"></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-55-16"><a href="#__codelineno-55-16" id="__codelineno-55-16" name="__codelineno-55-16"></a>
</span><span id="__span-55-17"><a href="#__codelineno-55-17" id="__codelineno-55-17" name="__codelineno-55-17"></a>        <span class="n">types_list</span> <span class="o">=</span> <span class="n">args_type_list</span> <span class="k">if</span> \
</span><span id="__span-55-18"><a href="#__codelineno-55-18" id="__codelineno-55-18" name="__codelineno-55-18"></a>            <span class="nb">isinstance</span><span class="p">(</span><span class="n">args_type_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
</span><span id="__span-55-19"><a href="#__codelineno-55-19" id="__codelineno-55-19" name="__codelineno-55-19"></a>
</span><span id="__span-55-20"><a href="#__codelineno-55-20" id="__codelineno-55-20" name="__codelineno-55-20"></a>        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
</span><span id="__span-55-21"><a href="#__codelineno-55-21" id="__codelineno-55-21" name="__codelineno-55-21"></a>            <span class="n">is_correct</span> <span class="o">*=</span> <span class="kc">True</span> <span class="k">if</span> \
</span><span id="__span-55-22"><a href="#__codelineno-55-22" id="__codelineno-55-22" name="__codelineno-55-22"></a>                <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types_list</span><span class="p">)</span> \
</span><span id="__span-55-23"><a href="#__codelineno-55-23" id="__codelineno-55-23" name="__codelineno-55-23"></a>                <span class="k">else</span> <span class="kc">False</span>
</span><span id="__span-55-24"><a href="#__codelineno-55-24" id="__codelineno-55-24" name="__codelineno-55-24"></a>
</span><span id="__span-55-25"><a href="#__codelineno-55-25" id="__codelineno-55-25" name="__codelineno-55-25"></a>        <span class="k">if</span> <span class="n">is_correct</span><span class="p">:</span>
</span><span id="__span-55-26"><a href="#__codelineno-55-26" id="__codelineno-55-26" name="__codelineno-55-26"></a>            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-55-27"><a href="#__codelineno-55-27" id="__codelineno-55-27" name="__codelineno-55-27"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-55-28"><a href="#__codelineno-55-28" id="__codelineno-55-28" name="__codelineno-55-28"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"One of the arguments is not one type of: "</span>
</span><span id="__span-55-29"><a href="#__codelineno-55-29" id="__codelineno-55-29" name="__codelineno-55-29"></a>                            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">types_list</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-55-30"><a href="#__codelineno-55-30" id="__codelineno-55-30" name="__codelineno-55-30"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</span></code></pre>
</div>
<p>
Zauważ, że przy użyciu funkcji
<code>
partial
</code>
kod uległ uproszczeniu, a funkcjonalność pozostała bez zmian. Dodatkowo dzięki wykorzystaniu dekoratora
<code>
wraps
</code>
działa dokumentacja, itp.
</p>
<p>
Uzupełnijmy jeszcze jak działa funkcja
<code>
partial
</code>
. Jest to funkcja, która jeśli zostanie wywołana, zachowuje się jak funkcja, która została jej przekazana jako argument wywołania. Dodatkowo należy zwrócić uwagę na to, jakie parametry jej przekazujemy. Zwróć uwagę, że
<code>
args_type_list
</code>
może przyjąć jedną z 2 wartości:
</p>
<ul>
<li>
<code>
func
</code>
- przekazujemy, jeśli wywołamy pusty dekorator (
<code>
@dekorator
</code>
) lub z parametrami jako
<em>
args
</em>
(
<code>
@dekorator([int])
</code>
),
</li>
<li>
<code>
args_type_list
</code>
- przekazujemy, jeśli wywołamy dekorator z parametrami jako
<em>
kwargs
</em>
(
<code>
@dekorator(args_type_list=[int])
</code>
).
</li>
</ul>
<p>
Działanie funkcji
<code>
partial
</code>
jest bardzo zbliżone do działania dekoratora
<code>
@wraps
</code>
. Co ciekawsze, to dekorator ten jest w zasadzie inną formą wywołania funkcji
<code>
partial
</code>
(w ramach ćwiczenia polecam przejrzeć we własnym zakresie jak wygląda implementacja funkcji
<code>
wraps
</code>
).
</p>
<h2 id="klasa-jako-dekorator">
Klasa jako dekorator
<a href="#klasa-jako-dekorator" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
Skoro wcześniej udowodniliśmy, że funkcja jest obiektem oraz że dekorator to funkcja, to może dałoby się zmusić obiekt, aby stał się dekoratorem?
</p>
<p>
Jak już wcześniej ustaliliśmy
<strong>
THIS IS PYTHON !!!
</strong>
więc odpowiedź powinna być oczywista |wink|.
</p>
<p>
Wcześniej pisałem, że jeśli w klasie zaimplementujemy funkcję
<code>
__call__
</code>
to obiekt, będzie zachowywał się jak funkcja, a więc możemy wykorzystać ten fakt do stworzenia dekoratora. Sprawdźmy jak wwyglądałby nasz dekorator, gdybyśmy zaimplementowali go przy użyciu klasy.
</p>
<div class="highlight language-python">
<pre><span></span><code><span id="__span-56-1"><a href="#__codelineno-56-1" id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">update_wrapper</span>
</span><span id="__span-56-2"><a href="#__codelineno-56-2" id="__codelineno-56-2" name="__codelineno-56-2"></a>
</span><span id="__span-56-3"><a href="#__codelineno-56-3" id="__codelineno-56-3" name="__codelineno-56-3"></a><span class="k">class</span> <span class="nc">decorator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="__span-56-4"><a href="#__codelineno-56-4" id="__codelineno-56-4" name="__codelineno-56-4"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="__span-56-5"><a href="#__codelineno-56-5" id="__codelineno-56-5" name="__codelineno-56-5"></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
</span><span id="__span-56-6"><a href="#__codelineno-56-6" id="__codelineno-56-6" name="__codelineno-56-6"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">func</span><span class="p">)</span>
</span><span id="__span-56-7"><a href="#__codelineno-56-7" id="__codelineno-56-7" name="__codelineno-56-7"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-56-8"><a href="#__codelineno-56-8" id="__codelineno-56-8" name="__codelineno-56-8"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_type_list</span> <span class="o">=</span> <span class="n">func</span>
</span><span id="__span-56-9"><a href="#__codelineno-56-9" id="__codelineno-56-9" name="__codelineno-56-9"></a>
</span><span id="__span-56-10"><a href="#__codelineno-56-10" id="__codelineno-56-10" name="__codelineno-56-10"></a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="__span-56-11"><a href="#__codelineno-56-11" id="__codelineno-56-11" name="__codelineno-56-11"></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
</span><span id="__span-56-12"><a href="#__codelineno-56-12" id="__codelineno-56-12" name="__codelineno-56-12"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_init</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="__span-56-13"><a href="#__codelineno-56-13" id="__codelineno-56-13" name="__codelineno-56-13"></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="__span-56-14"><a href="#__codelineno-56-14" id="__codelineno-56-14" name="__codelineno-56-14"></a>
</span><span id="__span-56-15"><a href="#__codelineno-56-15" id="__codelineno-56-15" name="__codelineno-56-15"></a>        <span class="n">is_correct</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="__span-56-16"><a href="#__codelineno-56-16" id="__codelineno-56-16" name="__codelineno-56-16"></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span id="__span-56-17"><a href="#__codelineno-56-17" id="__codelineno-56-17" name="__codelineno-56-17"></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-56-18"><a href="#__codelineno-56-18" id="__codelineno-56-18" name="__codelineno-56-18"></a>
</span><span id="__span-56-19"><a href="#__codelineno-56-19" id="__codelineno-56-19" name="__codelineno-56-19"></a>        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
</span><span id="__span-56-20"><a href="#__codelineno-56-20" id="__codelineno-56-20" name="__codelineno-56-20"></a>            <span class="n">is_correct</span> <span class="o">*=</span> <span class="kc">True</span> <span class="k">if</span> \
</span><span id="__span-56-21"><a href="#__codelineno-56-21" id="__codelineno-56-21" name="__codelineno-56-21"></a>                <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_list</span><span class="p">)</span> \
</span><span id="__span-56-22"><a href="#__codelineno-56-22" id="__codelineno-56-22" name="__codelineno-56-22"></a>                <span class="k">else</span> <span class="kc">False</span>
</span><span id="__span-56-23"><a href="#__codelineno-56-23" id="__codelineno-56-23" name="__codelineno-56-23"></a>
</span><span id="__span-56-24"><a href="#__codelineno-56-24" id="__codelineno-56-24" name="__codelineno-56-24"></a>        <span class="k">if</span> <span class="n">is_correct</span><span class="p">:</span>
</span><span id="__span-56-25"><a href="#__codelineno-56-25" id="__codelineno-56-25" name="__codelineno-56-25"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="__span-56-26"><a href="#__codelineno-56-26" id="__codelineno-56-26" name="__codelineno-56-26"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-56-27"><a href="#__codelineno-56-27" id="__codelineno-56-27" name="__codelineno-56-27"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"One of the arguments is not one type of: "</span>
</span><span id="__span-56-28"><a href="#__codelineno-56-28" id="__codelineno-56-28" name="__codelineno-56-28"></a>                            <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_type_list</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-56-29"><a href="#__codelineno-56-29" id="__codelineno-56-29" name="__codelineno-56-29"></a>
</span><span id="__span-56-30"><a href="#__codelineno-56-30" id="__codelineno-56-30" name="__codelineno-56-30"></a>    <span class="k">def</span> <span class="nf">_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
</span><span id="__span-56-31"><a href="#__codelineno-56-31" id="__codelineno-56-31" name="__codelineno-56-31"></a><span class="w">        </span><span class="sd">"""Fill some internal variables and update wrapper so it will</span>
</span><span id="__span-56-32"><a href="#__codelineno-56-32" id="__codelineno-56-32" name="__codelineno-56-32"></a><span class="sd">        return decorated function properties (like __doc__, etc.)"""</span>
</span><span id="__span-56-33"><a href="#__codelineno-56-33" id="__codelineno-56-33" name="__codelineno-56-33"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_func</span> <span class="o">=</span> <span class="n">func</span>
</span><span id="__span-56-34"><a href="#__codelineno-56-34" id="__codelineno-56-34" name="__codelineno-56-34"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_type_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
</span><span id="__span-56-35"><a href="#__codelineno-56-35" id="__codelineno-56-35" name="__codelineno-56-35"></a>        <span class="n">update_wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_func</span><span class="p">)</span>
</span></code></pre>
</div>
<p>
Powyższy kod jest odpowiednikiem dekoratora opisanego we wcześniejszym punkcie. Na pierwszy rzut oka, taka implementacja wydaje się dużo bardziej zagmatwana, ale umożliwia ona zastosowanie kilku innych ciekawych mechanizmów. Przykładem może być zastosowanie wzorca projektowego podobnego do Singletona (choć popularnie określany jest jako antywzorzec), czyli tzw. Borg (to materiał na oddzielny wpis, który już wkrótce będzie dostępny na tym blogu), a więc może działać jak cache lub mieć inne ciekawe właściwości.
</p>
<p>
Analizę powyższego kodu oraz sprawdzenie poprawności jego działania zostawię w Twojej gestii.
</p>
<h2 id="podsumowanie">
Podsumowanie
<a href="#podsumowanie" class="headerlink" title="Anchor link to this section for reference">
¶
</a>
</h2>
<p>
Jak więc widzisz, dekoratory to bardzo ciekawa konstrukcja w Pythonie. Umożliwiają bardzo dużo i pomimo, że powyższe przykłady były stosunkowo proste, to miały za zadanie umożliwić Ci zrozumienie mechanizmów ich działania, a nie powodować ataku paniki. Mam nadzieję, że udało mi się choć trochę je odczarować oraz, że zaczniesz ich używać podczas pisania swojego kodu.
</p>
<hr>
<p class="obsidian_backlink_title">
Backlinks:
</p>
<div class="obsidian_backlink">
<details class="backlink">
<summary>
<i class="fa-brands fa-python">
</i>
</summary>
<p>
</p><p class="obsidian_backlink">
-
<a href="https://testerembyc.pl/python-kompendium/#f2832f8dc755b2e6e1a8b5a4ffc45914">
Dekoratory w Pythonie
</a>
</p>
<hr>
<p class="obsidian_backlink">
-
<a href="https://testerembyc.pl/python-kompendium/#f2832f8dc755b2e6e1a8b5a4ffc45914">
args i kwargs
</a>
- w jaki sposób przekazywane są wartości argumentów do funkcji.
</p>
<hr>
<p class="obsidian_backlink">
-
<a href="https://testerembyc.pl/python-kompendium/#f2832f8dc755b2e6e1a8b5a4ffc45914">
_
<em>
call_
</em>
</a>
- jak sprawić, aby klasa zachowywała się jak funkcja.
</p>
<hr>
<p class="obsidian_backlink">
-
<a href="https://testerembyc.pl/python-kompendium/#f2832f8dc755b2e6e1a8b5a4ffc45914">
partial
</a>
- wywołanie funkcji przekazanej jako argument,
</p>
<hr>
<p class="obsidian_backlink">
-
<a href="https://testerembyc.pl/python-kompendium/#f2832f8dc755b2e6e1a8b5a4ffc45914">
wraps
</a>
- biblioteka wspomagająca tworzenie dekoratorów,
</p>
<hr>
<p class="obsidian_backlink">
-
<a href="https://testerembyc.pl/python-kompendium/#f2832f8dc755b2e6e1a8b5a4ffc45914">
dekorator
</a>
</p>
<hr>
<p class="obsidian_backlink">
-
<a href="https://testerembyc.pl/python-kompendium/#f2832f8dc755b2e6e1a8b5a4ffc45914">
funkcja jest obiektem
</a>
</p>
<p></p>
</details>
<details class="backlink">
<summary>
Najmniejszy framework do testów w Pythonie
</summary>
<p>
</p><p class="obsidian_backlink">
Jeśli czytałeś mój artykuł dotyczący
<a href="https://testerembyc.pl/posts/najmniejszy-framework-do-testow-w-pythonie/#7ea9799ca8f72fd8cbd49cd2810e0660">
dekoratorów w Pythonie
</a>
, to wspominam w nim o dwóch sposobach przekazywania argumentów do funkcji: przez 2020-dekoratory-w-pythonie.md(jeśli nie wiesz, o co chodzi, to zanim przejdziesz dalej, polecam się z tym zapoznać). W naszym kodzie przekazanie argumentów do metody
<code>
requests.request
</code>
wykonaliśmy właśnie przy użyciu
<code>
kwargs
</code>
, a więc de facto jako słownik, gdzie kluczem jest nazwa argumentu, a wartością danego klucza, wartość argumentu. Mówię o tym kawałku kodu:
</p>
<hr>
<p class="obsidian_backlink">
Jeśli czytałeś mój artykuł dotyczący 2020-dekoratory-w-pythonie.md, to wspominam w nim o dwóch sposobach przekazywania argumentów do funkcji: przez
<a href="https://testerembyc.pl/posts/najmniejszy-framework-do-testow-w-pythonie/#7ea9799ca8f72fd8cbd49cd2810e0660">
args i kwargs
</a>
(jeśli nie wiesz, o co chodzi, to zanim przejdziesz dalej, polecam się z tym zapoznać). W naszym kodzie przekazanie argumentów do metody
<code>
requests.request
</code>
wykonaliśmy właśnie przy użyciu
<code>
kwargs
</code>
, a więc de facto jako słownik, gdzie kluczem jest nazwa argumentu, a wartością danego klucza, wartość argumentu. Mówię o tym kawałku kodu:
</p>
<hr>
<p class="obsidian_backlink">
3. Następnie wywołujemy metodę
<a href="https://docs.python.org/3/library/functions.html#setattr">
https://docs.python.org/3/library/functions.html#setattr
</a>
, która jest metodą wbudowaną w język Python. Pozwala ona na wstawienie do obiektu, nowego atrybutu oraz przypisania mu wartości (o tym również wspominałem w artykule dotyczącym dekoratorów w sekcji
<a href="https://testerembyc.pl/posts/najmniejszy-framework-do-testow-w-pythonie/#7ea9799ca8f72fd8cbd49cd2810e0660">
funkcja jest obiektem
</a>
. Zauważ, że jej wywołanie przyjęło 3 argumenty:
</p>
<p></p>
</details>
<details class="backlink">
<summary>
Jeszcze mniejszy framework do testów w Pythonie
</summary>
<p>
</p><p class="obsidian_backlink">
2. Wyrażenie to przypisujemy do zmiennej
<code>
add
</code>
. W tym momencie zmienna
<code>
add
</code>
staje się funkcją, której ciałem jest wyrażenie Lambda (opisywałem ten mechanizm we wpisie dotyczącym
<a href="https://testerembyc.pl/posts/jeszcze-mniejszy-framework-do-testow-w-pythonie/#7ea9799ca8f72fd8cbd49cd2810e0660">
dekoratorów
</a>
, gdzie tłumaczyłem, że 2020-dekoratory-w-pythonie.md.
</p>
<hr>
<p class="obsidian_backlink">
2. Wyrażenie to przypisujemy do zmiennej
<code>
add
</code>
. W tym momencie zmienna
<code>
add
</code>
staje się funkcją, której ciałem jest wyrażenie Lambda (opisywałem ten mechanizm we wpisie dotyczącym 2020-dekoratory-w-pythonie.md, gdzie tłumaczyłem, że
<a href="https://testerembyc.pl/posts/jeszcze-mniejszy-framework-do-testow-w-pythonie/#7ea9799ca8f72fd8cbd49cd2810e0660">
funkcja jest obiektem
</a>
.
</p>
<p></p>
</details>
</div>
<script src="https://giscus.app/client.js" async crossorigin="anonymous" data-category="Komentarze na blogu" data-category-id="DIC_kwDOGBXvjM4CWu1l" data-emit-metadata="0" data-input-position="top" data-lang="pl" data-loading="lazy" data-mapping="pathname" data-reactions-enabled="1" data-repo="mkusz/testerembyc-web" data-repo-id="MDEwOlJlcG9zaXRvcnk0MDQwOTA3NjQ=" data-strict="1" data-theme="preferred_color_scheme"></script>
<script>var theme,giscus=document.querySelector("script[src*=giscus]"),palette=__md_get("__palette");palette&&"object"==typeof palette.color&&(theme="slate"===palette.color.scheme?"dark":"light",giscus.setAttribute("data-theme",theme)),document.addEventListener("DOMContentLoaded",function(){document.querySelector("[data-md-component=palette]").addEventListener("change",function(){var e=__md_get("__palette");e&&"object"==typeof e.color&&(e="slate"===e.color.scheme?"dark":"light",document.querySelector(".giscus-frame").contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app"))})})</script>
<div class="md-typeset tb-ext">
<hr>
<div class="tb-ext-grid">
<div class="tb-ext-grid__img">
<img src="https://testerembyc.pl/images/pages/jak_zaczac_automatyzowac_small.png">
</div>
<p class="tb-ext-grid__desc">
<b>
Jak zacząć automatyzować testy?
</b>
Poznaj 12 pytań, które pomogą Ci rozpocząć proces automatyzacji testów. W zupełnym oderwaniu od języka programowania, frameworków do testów oraz technologi w jakiej napisana została aplikacja, którą będziesz testować. Całość opisana prostym i zrozumiałym językiem.
<br>
<a href="https://testerembyc.pl/pages/jak-zaczac-automatyzowac-testy/" class="md-button md-button--primary">
Pobieram darmowy poradnik
</a>
</p>
</div>

</div>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-icon md-top" type="button" data-md-component="top" hidden>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z">
</path>
</svg>
Powrót do góry
</button>
</main>
<footer class="md-footer">
<nav class="md-grid md-footer__inner" aria-label="Stopka">
<a href="../jak-dorobic-do-etatu-czyli-tester-tworzy-rpa/" class="md-footer__link md-footer__link--prev" rel="prev" aria-label="Poprzednia strona: Jak dorobić do etatu, czyli tester tworzy RPA">
<div class="md-icon md-footer__button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z">
</path>
</svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
Poprzednia strona
</span>
<div class="md-ellipsis">
Jak dorobić do etatu, czyli tester tworzy RPA
</div>
</div>
</a>
<a href="../dlaczego-nie-bedziesz-testerem-i-co-mozesz-z-tym-fantem-zrobic-jesli-bardzo-chcesz/" class="md-footer__link md-footer__link--next" rel="next" aria-label="Następna strona: Dlaczego nie będziesz testerem i co możesz z tym fantem zrobić jeśli bardzo chcesz?">
<div class="md-footer__title">
<span class="md-footer__direction">
Następna strona
</span>
<div class="md-ellipsis">
Dlaczego nie będziesz testerem i co możesz z tym fantem zrobić jeśli bardzo chcesz?
</div>
</div>
<div class="md-icon md-footer__button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z">
</path>
</svg>
</div>
</a>
</nav>
<div class="md-typeset md-footer-meta">
<div class="md-grid md-footer-meta__inner">
<div class="md-copyright">
<div class="md-copyright__highlight">
© 2019-2023 Maciej Kusz
</div>
Utworzono z wykorzystaniem
<a href="https://www.mkdocs.org/" rel="noopener" target="_blank">
MkDocs
</a>
,
<a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
Material for MkDocs
</a>
,
<a href="https://mkusz.github.io/mkdocs-publisher/" rel="noopener" target="_blank">
MkDocs Publisher
</a>
oraz
<a href="https://pages.github.com" rel="noopener" target="_blank">
GitHub Pages
</a>
.
</div>
<div class="md-social">
<a href="/feed_rss_created.xml" class="md-social__link" title="" rel="noopener" target="_blank">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20 5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z">
</path>
</svg>
</a>
<a href="https://www.facebook.com/testerembyc" class="md-social__link" title="www.facebook.com" rel="noopener" target="_blank">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.-->
<path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z">
</path>
</svg>
</a>
<a href="https://www.instagram.com/testerembyc/" class="md-social__link" title="www.instagram.com" rel="noopener" target="_blank">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
<!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.-->
<path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z">
</path>
</svg>
</a>
<a href="https://www.youtube.com/@testerembyc" class="md-social__link" title="www.youtube.com" rel="noopener" target="_blank">
<svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg">
<!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.-->
<path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z">
</path>
</svg>
</a>
<a href="https://www.linkedin.com/in/maciej-kusz/" class="md-social__link" title="www.linkedin.com" rel="noopener" target="_blank">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
<!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.-->
<path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z">
</path>
</svg>
</a>
<a href="https://github.com/mkusz" class="md-social__link" title="github.com" rel="noopener" target="_blank">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg">
<!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.-->
<path 
d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z">
</path>
</svg>
</a>
<a href="mailto:maciej@testerembyc.pl" class="md-social__link" title="" rel="noopener" target="_blank">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="m4 8 8 5 8-5-8-5-8 5m18 0v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8c0-.73.39-1.36.97-1.71L12 .64l9.03 5.65c.58.35.97.98.97 1.71Z">
</path>
</svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-typeset md-dialog__inner">
</div>
</div>
<div class="md-consent" data-md-component="consent" hidden id="__consent">
<div class="md-consent__overlay">
</div>
<aside class="md-consent__inner">
<form class="md-typeset md-consent__form md-grid" name="consent">
<h4>
Lubisz ciasteczka?
</h4>
<p>
Używam ich, aby dostarczyć Ci lepszych treści. Chcesz wiedzieć więcej? Zerknij do
<a href="/pages/polityka-prywatnosci/" target="_blank">
polityki prywatności
</a>
.
</p>
<input type="checkbox" class="md-toggle" id="__settings">
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input type="checkbox" name="analytics" checked>
<span class="task-list-indicator">
</span>
Google Analytics
</label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">
Akceptuj
</button>
<label class="md-button" for="__settings">
Zarządzaj ustawieniami
</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
<script id="__config" type="application/json">
{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "navigation.tracking", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Skopiowano do schowka", "clipboard.copy": "Kopiuj do schowka", "search.result.more.one": "1 wi\u0119cej na tej stronie", "search.result.more.other": "# wi\u0119cej na tej stronie", "search.result.none": "Brak wynik\u00f3w wyszukiwania", "search.result.one": "Wyniki wyszukiwania: 1", "search.result.other": "Wyniki wyszukiwania: #", "search.result.placeholder": "Zacznij pisa\u0107, aby szuka\u0107", "search.result.term.missing": "Brak", "select.version": "Wybierz wersj\u0119"}}
</script>
<script src="../../assets/javascripts/bundle.3220b9d7.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js"></script>
<script defer>!function(e,t,n,c,o,a){e.fbq||(c=e.fbq=function(){c.callMethod?c.callMethod.apply(c,arguments):c.queue.push(arguments)},e._fbq||(e._fbq=c),(c.push=c).loaded=!0,c.version="2.0",c.queue=[],(o=t.createElement(n)).async=!0,o.src="https://connect.facebook.net/en_US/fbevents.js",(a=t.getElementsByTagName(n)[0]).parentNode.insertBefore(o,a))}(window,document,"script"),fbq("init","444619046317574"),fbq("track","PageView")</script>
<noscript>
<img src="https://www.facebook.com/tr?id=444619046317574&amp;ev=PageView&amp;noscript=1" alt="Facebook Pixel" height="1" style="display:none" width="1">

</noscript>
</body>
</html>