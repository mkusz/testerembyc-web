/*!
 * Handles finding a text string anywhere in the slides and showing the next occurrence to the user
 * by navigatating to that slide and highlighting it.
 *
 * @author Jon Snyder <snyder.jon@gmail.com>, February 2013
 */ let Plugin=()=>{let b,c,d,e,f,g,h;function i(){(c=document.createElement("div")).classList.add("searchbox"),c.style.position="absolute",c.style.top="10px",c.style.right="10px",c.style.zIndex=10,c.innerHTML=`<input type="search" class="searchinput" placeholder="Search..." style="vertical-align: top;"/>
		</span>`,(d=c.querySelector(".searchinput")).style.width="240px",d.style.fontSize="14px",d.style.padding="4px 6px",d.style.color="#000",d.style.background="#fff",d.style.borderRadius="2px",d.style.border="0",d.style.outline="0",d.style.boxShadow="0 2px 18px rgba(0, 0, 0, 0.2)",d.style["-webkit-appearance"]="none",b.getRevealElement().appendChild(c),d.addEventListener("keyup",function(a){13===a.keyCode?(a.preventDefault(),l(),g=!1):g=!0},!1),j()}function a(){c||i(),c.style.display="inline",d.focus(),d.select()}function j(){c||i(),c.style.display="none",h&&h.remove()}function k(){c||i(),"inline"!==c.style.display?a():j()}function l(){if(g){var a=d.value;""===a?(h&&h.remove(),e=null):(e=(h=new m("slidecontent")).apply(a),f=0)}e&&(e.length&&e.length<=f&&(f=0),e.length>f&&(b.slide(e[f].h,e[f].v),f++))}function m(a,c){var e=document.getElementById(a)||document.body,d=c||"EM",f=new RegExp("^(?:"+d+"|SCRIPT|FORM)$"),g=["#ff6","#a0ffff","#9f9","#f99","#f6f"],h=[],i=0,j="",k=[];this.setRegex=function(a){a=a.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w'-]+/g,"|"),j=new RegExp("("+a+")","i")},this.getRegex=function(){return j.toString().replace(/^\/\\b\(|\)\\b\/i$/g,"").replace(/\|/g," ")},this.hiliteWords=function(a){if(void 0!=a&&a&&j&&!f.test(a.nodeName)){if(a.hasChildNodes())for(var p,e,c=0;c<a.childNodes.length;c++)this.hiliteWords(a.childNodes[c]);if(3==a.nodeType&&(p=a.nodeValue)&&(e=j.exec(p))){for(var l=a;null!=l&&"SECTION"!=l.nodeName;)l=l.parentNode;for(var n=b.getIndices(l),r=k.length,q=!1,c=0;c<r;c++)k[c].h===n.h&&k[c].v===n.v&&(q=!0);q||k.push(n),h[e[0].toLowerCase()]||(h[e[0].toLowerCase()]=g[(i++)%g.length]);var m=document.createElement(d);m.appendChild(document.createTextNode(e[0])),m.style.backgroundColor=h[e[0].toLowerCase()],m.style.fontStyle="inherit",m.style.color="#000";var o=a.splitText(e.index);o.nodeValue=o.nodeValue.substring(e[0].length),a.parentNode.insertBefore(m,o)}}},this.remove=function(){for(var a,b=document.getElementsByTagName(d);b.length&&(a=b[0]);)a.parentNode.replaceChild(a.firstChild,a)},this.apply=function(a){if(void 0!=a&&a)return this.remove(),this.setRegex(a),this.hiliteWords(e),k}}return{id:"search",init(a){(b=a).registerKeyboardShortcut("CTRL + Shift + F","Search"),document.addEventListener("keydown",function(a){"F"==a.key&&(a.ctrlKey||a.metaKey)&&(a.preventDefault(),k())},!1)},open:a}};export default Plugin